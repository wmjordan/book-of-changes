<!DOCTYPE html>
<html lang="zh-CN">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>大衍筮法起卦</title>
	<link rel="stylesheet" href="styles.css">
</head>

<body>
	<div class="header">
		<h1 class="title">大衍筮法</h1>
		<div class="subtitle">周易古法占筮 · 十有八变而成卦</div>
	</div>

	<div class="main-wrapper">
		<div class="content-column">
			<!--卦象结果-->
			<div class="result-bar">
				<div class="result-text" id="resultText">-</div>
			</div>

			<div class="container">
				<div class="grass-counter" id="grassCounter">蓍草: 50根</div>

				<div class="main-content">
					<div class="gua-container" id="guaContainer">
						<!-- 爻行将由JavaScript动态生成（从下到上） -->
					</div>

					<div class="button-container">
						<button class="btn" id="restartBtn">重占</button>
						<button class="btn" id="saveBtn" style="display: none; margin-left: 15px;">保存</button>
					</div>
				</div>
			</div>

			<!-- 控制面板 -->
			<div class="control-panel">
				<div class="control-group">
					<span class="control-label">本卦:</span>
					<select id="originalGua" class="gua-select">
						<option value="">--请选择本卦--</option>
						<!-- 卦名选项将由JavaScript动态生成 -->
					</select>
				</div>

				<div class="control-group">
					<span class="control-label">之卦:</span>
					<select id="changedGua" class="gua-select">
						<option value="same">同本卦（静卦）</option>
						<!-- 卦名选项将由JavaScript动态生成 -->
					</select>
				</div>

				<div class="button-group">
					<button class="apply-btn" id="applyBtn">手动设卦</button>
					<button class="apply-btn" id="loadBtn">加载</button>
				</div>
			</div>

			<div class="process-panel" style="display: none;">
				<div class="panel-title">占筮过程</div>
				<div class="process-list" id="processList">
					<!-- 过程列表将由JavaScript动态生成 -->
				</div>
			</div>

		</div>

		<div class="gua-details-container" id="guaDetailsContainer" style="display: none;">
			<div class="gua-details-header">
				<h3 id="guaDetailsTitle"></h3>
			</div>
			<div class="gua-details-content" id="guaDetailsContent"></div>
		</div>
	</div>

	<div class="explanation">
		<p>大衍筮法源自《周易·系辞》，使用五十根蓍草，取出一根不用，象征太极。经过"分二"、"挂一"、"揲四"、"归奇"四步为一变，三变成一爻，十八变成一卦。</p>
	</div>
	<div class="footer">
		<p>大衍之数五十，其用四十有九。分而为二以象两，挂一以象三，揲之以四以象四时，归奇于扐以象闰。</p>
		<p>——《周易·系辞上》</p>
	</div>
	<div class="footer">本程序有超过九成代码系由<u>深度求索</u>生成，特此鸣谢。制作：<a href="https://github.com/wmjordan/book-of-changes" target="_blank" title="点击此链接访问源代码网站、反馈问题或提供建议">听琴斋主人</a></div>
	<div id="historyModal" class="modal">
		<div class="modal-content">
			<div class="modal-header">
				<h3>占筮历史记录</h3>
				<span class="close">&times;</span>
			</div>
			<div class="modal-body">
				<div class="import-export">
					<input type="file" id="importFile" accept=".json" style="display:none">
					<button class="btn" id="importBtn">导入</button>
					<button class="btn" id="exportBtn">导出</button>
				</div>
				<ul id="historyList"></ul>
			</div>
		</div>
	</div>
	<div id="saveModal" class="modal">
		<div class="modal-content">
			<div class="modal-header">
				<h3>保存占筮记录</h3>
				<span class="close-save">&times;</span>
			</div>
			<div class="modal-body">
				<div class="input-group">
					<label for="eventInput">占筮事项:</label>
					<input type="text" id="eventInput" placeholder="请输入占筮事项">
				</div>
				<div class="input-group">
					<label for="noteInput">备注:</label>
					<textarea id="noteInput" placeholder="请输入备注（可选）"></textarea>
				</div>
				<div class="modal-buttons">
					<button id="confirmSave">保存</button>
					<button id="cancelSave">取消</button>
				</div>
			</div>
		</div>
	</div>

	<script src="text.js"></script>
	<script src="main.js"></script>

</body>

</html>